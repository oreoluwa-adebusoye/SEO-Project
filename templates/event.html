{% extends "layout.html" %}
{% block content %}

<div class="container mt-4">

  {% if create_mode %}
    <!-- CREATE EVENT FORM -->
    <h2 class="mb-3">Create Event</h2>
    <form method="POST">
      <div class="mb-3">
        <label class="form-label">Title</label>
        <input name="title" class="form-control" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Start (date & time)</label>
        <input type="datetime-local" name="start" class="form-control" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Location</label>
        <input name="location_text" class="form-control" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Description</label>
        <textarea name="description" class="form-control" rows="4"></textarea>
      </div>

      <div class="mb-3">
        <label class="form-label">Image URL</label>
        <input type="url" name="image_url" class="form-control" placeholder="https://example.com/cover.jpg">
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" name="is_private" id="is_private">
        <label class="form-check-label" for="is_private">Private (invite-only)</label>
      </div>

      <button type="submit" class="btn btn-primary">Create</button>
      <a href="{{ url_for('events') }}" class="btn btn-secondary">Cancel</a>
    </form>

  {% elif event %}
    <!-- VIEW EVENT -->
    <div class="card shadow p-4">
      {% if event.image_url %}
        <img src="{{ event.image_url }}" class="img-fluid rounded mb-3" alt="{{ event.title }}">
      {% endif %}
      <h2 class="card-title mb-2">{{ event.title }}</h2>
      <p class="text-muted mb-1"><strong>Date:</strong> {{ event.start | datetimeformat_safe }}</p>
      <p class="text-muted"><strong>Location:</strong> {{ event.location_text }}</p>
      {% if event.is_private %}<span class="badge bg-warning text-dark">Private</span>{% endif %}
      {% if event.description %}<p class="mt-3 mb-0">{{ event.description }}</p>{% endif %}
      <div class="mt-3"><a href="{{ url_for('events') }}" class="btn btn-secondary">Back to Events</a></div>
    </div>

  {% else %}
    <!-- NO EVENT FOUND -->
    <div class="alert alert-danger">Event details not found.</div>
    <a href="{{ url_for('events') }}" class="btn btn-secondary mt-2">Back to Events</a>
  {% endif %}

</div>

{% endblock %}
